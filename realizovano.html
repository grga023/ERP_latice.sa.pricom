<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Latice sa pricom - Realizovane porudÅ¾bine</title>
<link rel="stylesheet" href="style.css">
<script src="script.js"></script>
</head>
<body>

<!-- Navigation bar -->
<nav class="topnav">
  <button class="hamburger" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
  </button>
  <div class="nav-menu">
    <a href="index.html">Dodaj porudÅ¾binu</a>
    <a href="porudzbenice.html">Nove porudÅ¾bine</a>
    <a href="realizovano.html">Realizovane porudÅ¾bine</a>
    <a href="za_daostavu.html">Za dostavu</a>
  </div>
  <button class="theme-toggle" onclick="toggleDarkMode()">ğŸŒ™ Dark Mode</button>
</nav>

<div class="container">
<h1>Realizovane porudÅ¾bine</h1>

<table id="shippingTable">
<thead>
<tr>
    <th>ID</th>
    <th>Naziv</th>
    <th>Cena</th>
    <th>PlaÄ‡eno</th>
    <th>Kupac</th>
    <th>Datum</th>
    <th>Opis</th>
    <th>Slika</th>
    <th>Status</th>
    <th>Akcija</th>
</tr>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<script>
async function loadToBeShipped() {
    const res = await fetch('/orders');
    const orders = await res.json();
    const tbody = document.querySelector('#shippingTable tbody');
    tbody.innerHTML = '';

    orders.forEach(order => {
        if(order.status === 'realized') {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${order.id}</td>
                <td>${order.naziv}</td>
                <td>${order.cena}</td>
                <td>${order.placeno ? 'âœ…' : 'âŒ'}</td>
                <td>${order.kupac}</td>
                <td>${order.datum || '-'}</td>
                <td>${order.opis || '-'}</td>
                <td><img src="/images/${order.slika}" /></td>
                <td>${order.status}</td>
                <td><button onclick="editOrder(${order.id})">Izmeni</button></td>
            `;
            tbody.appendChild(tr);
        }
    });
}

// initial load
loadToBeShipped();

function editOrder(id) {
    window.location.href = `edit.html?id=${id}`;
}
</script>

</body>
</html>
